<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Zander’s Brainstorming Page</title>

<script src="site_libs/header-attrs-2.25/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="data_cleaning.html">Data Cleaning</a>
</li>
<li>
  <a href="sharon.html">Sharon</a>
</li>
<li>
  <a href="steph.html">Steph</a>
</li>
<li>
  <a href="grace.html">Grace</a>
</li>
<li>
  <a href="zander.html">Zander</a>
</li>
<li>
  <a href="christine.html">Christine</a>
</li>
<li>
  <a href="report.html">Report</a>
</li>
<li>
  <a href="mailto:&lt;sdc2157@cumc.columbia.edu&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://github.com/skulali/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Zander’s Brainstorming Page</h1>

</div>


<div
id="tree-distribution-ecological-variables-and-health-relationships"
class="section level3">
<h3>Tree Distribution, Ecological Variables, and Health
Relationships</h3>
<pre class="r"><code>library(tidyverse)
library(ggridges)
library(patchwork)
library(plotly)
library(sf)
library(tmap)
library(tmaptools)

theme_set(theme(legend.position = &quot;bottom&quot;))

options(
  ggplot2.continuous.colour = &quot;viridis&quot;,
  ggplot2.continuous.fill = &quot;viridis&quot;
)

scale_colour_discrete = scale_colour_viridis_d
scale_fill_discrete = scale_fill_viridis_d</code></pre>
<pre class="r"><code>trees_2015_cleaned = read_csv(&quot;large_tree_data/tree_2015_cleaned.csv&quot;)</code></pre>
<pre><code>## Rows: 683788 Columns: 39
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (22): curb_loc, status, health, spc_latin, spc_common, guards, sidewalk,...
## dbl (17): tree_id, block_id, tree_dbh, stump_diam, postcode, community_board...
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre class="r"><code>trees_dbh = trees_2015_cleaned |&gt; 
  drop_na(tree_dbh) |&gt; 
  group_by(borough, nta_name) |&gt; 
  summarize(
    n_trees = n(),
    avg_dbh = mean(tree_dbh)) |&gt; 
  arrange(desc(avg_dbh))</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;borough&#39;. You can override using the
## `.groups` argument.</code></pre>
<pre class="r"><code>large_tree_table = trees_dbh |&gt; 
  ungroup() |&gt; 
  filter(n_trees &gt; 100) |&gt; 
  filter(min_rank(desc(avg_dbh)) &lt; 11) |&gt; 
  knitr::kable(digits = 2, caption= &quot;Top 10 Neighborhoods wth the Highest Average DBH (inches) Across Local Street Trees&quot;)

large_tree_table</code></pre>
<table>
<caption>Top 10 Neighborhoods wth the Highest Average DBH (inches)
Across Local Street Trees</caption>
<colgroup>
<col width="18%" />
<col width="61%" />
<col width="10%" />
<col width="10%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">borough</th>
<th align="left">nta_name</th>
<th align="right">n_trees</th>
<th align="right">avg_dbh</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Queens</td>
<td align="left">Kew Gardens</td>
<td align="right">2024</td>
<td align="right">15.56</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="left">Woodhaven</td>
<td align="right">4254</td>
<td align="right">15.41</td>
</tr>
<tr class="odd">
<td align="left">Brooklyn</td>
<td align="left">Flatlands</td>
<td align="right">5589</td>
<td align="right">15.40</td>
</tr>
<tr class="even">
<td align="left">Staten Island</td>
<td align="left">New Dorp-Midland Beach</td>
<td align="right">5452</td>
<td align="right">15.24</td>
</tr>
<tr class="odd">
<td align="left">Brooklyn</td>
<td align="left">East Flatbush-Farragut</td>
<td align="right">3008</td>
<td align="right">15.01</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="left">Georgetown-Marine Park-Bergen Beach-Mill Basin</td>
<td align="right">7442</td>
<td align="right">15.01</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="left">South Ozone Park</td>
<td align="right">7321</td>
<td align="right">14.97</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="left">Jamaica Estates-Holliswood</td>
<td align="right">4254</td>
<td align="right">14.73</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="left">Oakland Gardens</td>
<td align="right">6059</td>
<td align="right">14.73</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="left">Auburndale</td>
<td align="right">5332</td>
<td align="right">14.59</td>
</tr>
</tbody>
</table>
<pre class="r"><code>borough_dbh = trees_2015_cleaned |&gt; 
  drop_na(tree_dbh) |&gt; 
  group_by(borough) |&gt; 
  mutate(borough_dbh = mean(tree_dbh))

borough_dbh |&gt; 
  filter(tree_dbh &lt; 101) |&gt; 
ggplot(aes(x = borough, y = tree_dbh, fill = borough)) + geom_boxplot() + scale_y_continuous(breaks = scales::pretty_breaks(10)) +
  labs(
    title = &quot;Average Tree DBH Across NYC Boroughs&quot;,
    y = &quot;Measured DBH (Inches)&quot;,
    x = &quot;Borough&quot;
  )</code></pre>
<p><img src="zander_files/figure-html/Borough%20DBH%20Boxplot-1.png" width="672" /></p>
<pre class="r"><code>#70 Trees have a dbh higher than 100 inches, removed from visualization above to see boxplots better
outlier_trees = borough_dbh |&gt; 
  filter(tree_dbh &gt; 101) |&gt; 
  count(tree_dbh)

outlier_trees |&gt; 
  knitr::kable()</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">borough</th>
<th align="right">tree_dbh</th>
<th align="right">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Bronx</td>
<td align="right">105</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Bronx</td>
<td align="right">106</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Bronx</td>
<td align="right">127</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Bronx</td>
<td align="right">132</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Bronx</td>
<td align="right">149</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Bronx</td>
<td align="right">169</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Bronx</td>
<td align="right">204</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Bronx</td>
<td align="right">291</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Bronx</td>
<td align="right">450</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">104</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Brooklyn</td>
<td align="right">110</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">118</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Brooklyn</td>
<td align="right">123</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">127</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Brooklyn</td>
<td align="right">141</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">142</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Brooklyn</td>
<td align="right">145</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">151</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Brooklyn</td>
<td align="right">159</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">164</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Brooklyn</td>
<td align="right">170</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">172</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Brooklyn</td>
<td align="right">175</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">183</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Brooklyn</td>
<td align="right">195</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">204</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Brooklyn</td>
<td align="right">210</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">248</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Brooklyn</td>
<td align="right">266</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">293</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Brooklyn</td>
<td align="right">318</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">425</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Manhattan</td>
<td align="right">109</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Manhattan</td>
<td align="right">120</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Manhattan</td>
<td align="right">199</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Manhattan</td>
<td align="right">228</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Manhattan</td>
<td align="right">318</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="right">106</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="right">109</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="right">110</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="right">120</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="right">132</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="right">139</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="right">140</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="right">141</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="right">149</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="right">165</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="right">168</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="right">172</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="right">177</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="right">181</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="right">198</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="right">204</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="right">217</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="right">261</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="right">281</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="right">282</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="right">389</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Staten Island</td>
<td align="right">102</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Staten Island</td>
<td align="right">122</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Staten Island</td>
<td align="right">123</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Staten Island</td>
<td align="right">128</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Staten Island</td>
<td align="right">131</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Staten Island</td>
<td align="right">143</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Staten Island</td>
<td align="right">147</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Staten Island</td>
<td align="right">154</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Staten Island</td>
<td align="right">234</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Staten Island</td>
<td align="right">250</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Staten Island</td>
<td align="right">255</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Staten Island</td>
<td align="right">298</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<pre class="r"><code>borough_dbh |&gt; 
  filter(tree_dbh &lt; 51) |&gt; 
   ggplot(aes(x = tree_dbh)) + geom_histogram() + scale_y_continuous(breaks = scales::pretty_breaks(10)) + scale_x_continuous(breaks = scales::pretty_breaks(10)) + 
   labs(
    title = &quot;Overall Distribution of Tree Diameters at Breast Height, New York City&quot;,
    x = &quot;Measured DBH (Inches)&quot;,
    y = &quot;Number of Trees&quot;
  )</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="zander_files/figure-html/Initial%20Histogram-1.png" width="672" /></p>
<pre class="r"><code>borough_dbh |&gt; 
  filter(tree_dbh &lt; 50) |&gt; 
  ggplot(aes(x = tree_dbh, fill = borough)) + 
  geom_density() + facet_grid(borough ~ .) +
  scale_x_continuous(breaks = scales::pretty_breaks(12)) +
  labs(
    title = &quot;Density Plot of All Measured Tree Diameters Below 50 inches&quot;,
    x = &quot;Measured DBH (Inches)&quot;,
    y = &quot;Density&quot;
  )</code></pre>
<p><img src="zander_files/figure-html/Density%20Plot%20Faceted%20By%20Borough-1.png" width="672" /></p>
<pre class="r"><code>neighborhood_dbh = trees_2015_cleaned |&gt; 
  drop_na(tree_dbh) |&gt; 
  group_by(nta_name) |&gt; 
  mutate(nta_dbh = mean(tree_dbh)) |&gt; 
  ungroup() |&gt; 
  mutate(nta_name = fct_reorder(nta, nta_dbh))

neighborhood_dbh |&gt; 
ggplot(aes(x = nta_name, y = nta_dbh, color = borough)) + geom_point() + facet_grid(borough ~ .) + theme(axis.text.x = element_text(angle = 60)) +
  labs(
    title = &quot;Average DBH By NYC Neighborhood Tabulation Area&quot;,
    x = &quot;NTA Neighborhood&quot;,
    y = &quot;Mean DBH. (Inches)&quot;
  )</code></pre>
<p><img src="zander_files/figure-html/NTA%20Average%20DBH-1.png" width="672" /></p>
</div>
<div id="spatially-mapping-neighborhood-dbh-values-across-nyc"
class="section level1">
<h1>Spatially Mapping Neighborhood DBH Values Across NYC</h1>
<pre class="r"><code>#Reading in Shapefile
nyc_nta = st_read(&quot;large_tree_data/nyc_nta_mapdata/geo_export_e924b274-8b6e-427d-87c0-92bfde8ce30a.shp&quot;)</code></pre>
<pre><code>## Reading layer `geo_export_e924b274-8b6e-427d-87c0-92bfde8ce30a&#39; from data source `/Users/zanderdj/Desktop/Data Science 1/p8105_final/large_tree_data/nyc_nta_mapdata/geo_export_e924b274-8b6e-427d-87c0-92bfde8ce30a.shp&#39; 
##   using driver `ESRI Shapefile&#39;
## Simple feature collection with 195 features and 7 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -74.25559 ymin: 40.49612 xmax: -73.70001 ymax: 40.91553
## Geodetic CRS:  WGS84(DD)</code></pre>
<pre class="r"><code>glimpse(nyc_nta)</code></pre>
<pre><code>## Rows: 195
## Columns: 8
## $ borocode   &lt;dbl&gt; 3, 3, 2, 3, 3, 4, 4, 3, 4, 2, 4, 4, 3, 3, 3, 2, 3, 4, 3, 3,…
## $ boroname   &lt;chr&gt; &quot;Brooklyn&quot;, &quot;Brooklyn&quot;, &quot;Bronx&quot;, &quot;Brooklyn&quot;, &quot;Brooklyn&quot;, &quot;Q…
## $ countyfips &lt;chr&gt; &quot;047&quot;, &quot;047&quot;, &quot;005&quot;, &quot;047&quot;, &quot;047&quot;, &quot;081&quot;, &quot;081&quot;, &quot;047&quot;, &quot;08…
## $ ntacode    &lt;chr&gt; &quot;BK43&quot;, &quot;BK75&quot;, &quot;BX40&quot;, &quot;BK88&quot;, &quot;BK96&quot;, &quot;QN52&quot;, &quot;QN53&quot;, &quot;BK…
## $ ntaname    &lt;chr&gt; &quot;Midwood&quot;, &quot;Bedford&quot;, &quot;Fordham South&quot;, &quot;Borough Park&quot;, &quot;Rug…
## $ shape_area &lt;dbl&gt; 35799638, 32629833, 6307284, 54005019, 32706946, 29454380, …
## $ shape_leng &lt;dbl&gt; 27996.59, 29992.92, 15878.27, 39247.23, 30957.85, 25843.36,…
## $ geometry   &lt;MULTIPOLYGON [°]&gt; MULTIPOLYGON (((-73.94733 4..., MULTIPOLYGON (…</code></pre>
<pre class="r"><code>head(nyc_nta)</code></pre>
<pre><code>## Simple feature collection with 6 features and 7 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -74.00736 ymin: 40.60999 xmax: -73.79458 ymax: 40.86276
## Geodetic CRS:  WGS84(DD)
##   borocode boroname countyfips ntacode              ntaname shape_area
## 1        3 Brooklyn        047    BK43              Midwood   35799638
## 2        3 Brooklyn        047    BK75              Bedford   32629833
## 3        2    Bronx        005    BX40        Fordham South    6307284
## 4        3 Brooklyn        047    BK88         Borough Park   54005019
## 5        3 Brooklyn        047    BK96 Rugby-Remsen Village   32706946
## 6        4   Queens        081    QN52        East Flushing   29454380
##   shape_leng                       geometry
## 1   27996.59 MULTIPOLYGON (((-73.94733 4...
## 2   29992.92 MULTIPOLYGON (((-73.94193 4...
## 3   15878.27 MULTIPOLYGON (((-73.89138 4...
## 4   39247.23 MULTIPOLYGON (((-73.97605 4...
## 5   30957.85 MULTIPOLYGON (((-73.90856 4...
## 6   25843.36 MULTIPOLYGON (((-73.79493 4...</code></pre>
<pre class="r"><code>tm_shape(nyc_nta) +
  tm_polygons()</code></pre>
<p><img src="zander_files/figure-html/Importing%20Shapefile%20for%20Data%20Join-1.png" width="672" /></p>
<pre class="r"><code>nta_dbh_summarized = trees_2015_cleaned |&gt; 
  drop_na(tree_dbh) |&gt; 
  group_by(nta) |&gt; 
  summarize(
    trees_per_nta = n(),
    avg_dbh = mean(tree_dbh))


nta_dbh_spatial = merge(nyc_nta, nta_dbh_summarized, 
                        by.x = &quot;ntacode&quot;,
                        by.y = &quot;nta&quot;)</code></pre>
<pre class="r"><code>#Fast to render using the summarized df instead of full tree csv dataframe, but noticing some NTA&#39;s are missing from the Street Tree Data Census 188/195 are present

#Missing NTA Values appear to be park green spaces? How can I fix or color them a different shade. Is it fine to have these gaps?

tm_shape(nta_dbh_spatial) +
  tm_polygons(col = &quot;avg_dbh&quot;,
              style = &quot;quantile&quot;,
              n = 5,
              palette = &quot;YlGn&quot;,
              border.col = &quot;black&quot;,
              title = &quot;Mean Tree DBH (Inches)&quot;) +
  tm_layout(main.title = &quot;Average Tree DBH Across NYC Neighborhoods&quot;) +
  tm_legend(legend.position = c(&quot;left&quot;,&quot;center&quot;))</code></pre>
<p><img src="zander_files/figure-html/Visualizing%20DBH%20Data%20Test%201-1.png" width="672" /></p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
